{% extends 'base.html' %} {% block title %}Biotools linter{% endblock %} {% block extrahead %}
<meta name=description content=" A rule-based checker for bio.tools tools "> {% endblock %} {% block content %}
<p></p>
<article>
    <h1>Bio.tools linter</h1>
    <p>
        A rule-based checker for the <a href="https://bio.tools/">bio.tools database</a>. The linter searches the entire
        bio.tools API and checks various properties of the tool's JSON data, such as dead URL links, and sends it to
        a database this website draws from.
        Currently serving <code>{{count}}</code> entries.
        Oldest entry was linted at <code>{{last_time | date(format="%Y-%m-%d %H:%M") }}</code>.
    </p>

    <table id="table">
        <thead>
            <tr>
                <th>Tool name</th>
                <th>Error</th>
                <th>Code</th>
                <th>Found at</th>
                <th>Links</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div id="new"></div>
</article>

<script>
    let table = document.getElementById("table");

    new gridjs.Grid({
        from: table,
        search: {
            server: {
                url: (prev, keyword) => `${prev}?query=${keyword}`
            },
            debounceTimeout: 250,

        },
        pagination: {
            limit: 100,
            server: {
                url: (prev, page, limit) => `${prev}${prev.includes('?') ? '&' : '?'}page=${page}`
            }
        },
        server: {
            url: '/api',
            then: data => data.results.map(entry => [
                gridjs.html(`<a href="https://bio.tools/${entry.tool}">${entry.tool}</a>`),
                gridjs.html(entry.processed_text),
                entry.timestamp,
                entry.code,
                gridjs.html(`<a href="https://bio.tools/api/tool/${entry.tool}">JSON</a>
                <a href="https://bio.tools/${entry.tool}/edit">Edit</a>`)
            ]),
            total: data => data.count
        },
        language: {
            'search': {
              'placeholder': 'üîç Search for name, biotools ID or error code'
            },
        }
    }).render(document.getElementById("new"));
    
</script>
{% endblock %}