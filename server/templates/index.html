{% extends 'base.html' %} {% block title %}Biotools database linter{% endblock %} {% block extrahead %}
<link href="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-1.13.6/datatables.min.css" rel="stylesheet">

<script src="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-1.13.6/datatables.min.js"></script>{% endblock %} {% block
content %}
<p></p>
<article>
    <h1>Biotools database linter</h1>
    <p>
        This tool searches the entire <a href="https://bio.tools/">bio.tools database</a> for errors in the to help
        maintainers and editors with data quality.
        Currently serving <code>{{error_count}}</code> errors and <code>{{critical_count}}</code> security warnings for
        <code>{{tool_count}}</code> tools, oldest entry was
        linted at <code>{{last_time}}</code>.

        <br>
        <br>

        Disclaimer: This tool does not cover all possible aspects or validations that can be performed on the data. It
        should be used as an additional tool for evaluating the information retrieved from the bio.tools API.
        Please use this tool responsibly and do not misuse or overwhelm the bio.tools API with excessive requests.
    </p>

    <table id="table"></table>
</article>

<script>
    $('#table').dataTable({
        serverSide: true,
        lengthChange: false,
        pageLength: 100,
        ordering: false,
        ajax: {
            url: '/api/search',
            data: function (d) {
                d.page = d.start / 100
                if (d['search']["value"] != "")
                {
                    d.query = d['search']["value"]
                }
            },
            dataSrc: 'results',
            dataFilter: function (data) {
                var json = jQuery.parseJSON(data);
                json.recordsTotal = json.count;
                json.recordsFiltered = json.count;

                return JSON.stringify(json); // return JSON string
            }
        },
        columns: [
            { data: 'tool' },
            { data: 'code' },
            { data: 'text' },
            {
                data: 'severity',
                render: function (data, type, row) {
                    switch (data) {
                        case 2:
                            return "Linter error";
                            break;
                        case 4:
                            return "Critical"
                            break;
                        case 5:
                            return "High"
                            break;
                        case 6:
                            return "Medium"
                            break;
                        case 7:
                            return "Low"
                            break;
                        default:
                            return "Error";
                    }
                }
            },
            {
                data: 'timestamp'
            },
            {
                data: 'tool',
                render: function (data, type, row) {
                    return (`<a target="_blank" href="https://bio.tools/api/tool/${data}">JSON</a>
                <a target="_blank" href="https://bio.tools/${data}/edit" rel="nofollow">Edit</a>`);
                }
            },
        ]
    });

</script>
{% endblock %}